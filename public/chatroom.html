<!DOCTYPE html>
<html lang="en">
<head>
    <title>Haipei Node Chat</title>
    <meta charset="utf-8"/>
    <script src="./javascripts/jquery.js"></script>
    <script src="./javascripts/zTool.js"></script>
    <script src="./javascripts/chatLib.js"></script>
    <script src="./javascripts/DateUtil.js"></script>
    <script src="./javascripts/chat.js"></script>
    <script>
        $(function () {
            $.get("/history", function (data) {
                let history = JSON.parse(data);

                for (i = 0; i < history.length; i++) {
                    let his = "<li>" + history[i].user + " (" + history[i].time + ")" + history[i].content + "</li>";
                    $("#history").append(his);
                }
            });
        });
    </script>
    <link rel="stylesheet" href="./javascripts/main.css">


</head>
<body>

<div id='errorPage' class='page' style='display:none;'>
    <h1>
        WebSocket is not supported by this browser, please use chrome or Microsoft Edge or opera or firefox
    </h1>
</div>
<div id='prePage' class='page' style='width:690px;text-align:center;'>
    <label for='nickInput'></label>
    <input id='nickInput' type='text' placeholder="Please enter your nickname"/>&nbsp;
    <input id='open' type='button' value='Enter the chat room'/>
</div>
<div id='mainPage' class='page' style='display:none;'>
    <div style='overflow:hidden;'>
        <div class='talkLeft'>
            <div id='talkFrame'></div>
            <div id='inputDiv'>
                <label for="message"></label>
                <textarea placeholder="Hey, just say something" id="message"></textarea>
            </div>
            <div style='overflow:hidden;'>
                <input class='f-left' type='button' value='View messages' id="history"/>
                <ul id="history"></ul>
                <input class='f-right' type='button' value='Send' id="send"/>
            </div>
        </div>
        <div class='talkRight'>
            <div id='onlineUsers'></div>
        </div>
    </div>
</div>
</body>
</html>
